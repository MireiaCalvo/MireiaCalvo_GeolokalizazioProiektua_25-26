<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Friki Map - Dendak</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome ikonoentzako -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="/Geolokalizazioa/css/style.css">
</head>

<body>
    <div class="container-centered">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-custom">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <i class='fa-solid fa-map-location-dot me-2'></i>Friki Map
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" data-page="hasiera">Hasiera</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="dendak">Dendak</a>
                        </li>
                    </ul>

                    <div class="theme-toggle-container">
                        <span class="theme-toggle-label">Light</span>
                        <label class="theme-toggle">
                            <input type="checkbox" id="themeToggle">
                            <span class="theme-toggle-slider"></span>
                        </label>
                        <span class="theme-toggle-label ms-2">Dark</span>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Hasiera Page -->
            <div id="hasiera" class="page-content active">
                <h1><i class="fas fa-home me-2"></i>Hasiera</h1>
                <div class="row">
                    <div class="col-md-6">
                        <div class="content-card">
                            <div class="content-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <h3>Light/Dark Theme</h3>
                            <p>This website features a fully functional theme switcher. Click the toggle switch in the
                                navbar to switch between light and dark modes.</p>
                            <p>The light theme uses blue and purple colors while the dark theme uses black and gray
                                tones.</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="content-card">
                            <div class="content-icon">
                                <i class="fas fa-palette"></i>
                            </div>
                            <h3>Color Schemes</h3>
                            <p>Light theme colors: Various shades of blue and purple for a fresh, clean look.</p>
                            <p>Dark theme colors: Black, gray, and dark tones for reduced eye strain in low-light
                                conditions.</p>
                            <button class="btn-custom" id="toggleDemo">Toggle Theme Demo</button>
                        </div>
                    </div>
                </div>
                <div class="content-card">
                    <h3>Friki Map - Euskal Herriko dendak</h3>
                    <p>Gure webguneak Euskal Herriko friki kulturaren dendak eta establezimenduak erakusten ditu mapa interaktibo batean. API baten bidez MongoDB datu-baseko informazioa kargatzen dugu.</p>
                    <p>Denda bakoitzak bere kategoria, kokapena eta informazio gehigarria erakusten du.</p>
                    <p>Erabili goiko menuan "Dendak" atala ikusteko eta mapa interaktiboa erabiltzeko.</p>
                </div>
            </div>

            <!-- Dendak Page -->
            <div id="dendak" class="page-content">
                <h1><i class="fas fa-store-alt me-2"></i>Dendak</h1>

                <!-- Explanation Section (Above) -->
                <div class="content-card mb-4">
                    <h3><i class="fas fa-info-circle me-2"></i>Dendaren Informazioa</h3>
                    <div class="row">
                        <div class="col-md-8">
                            <p>Hemen ikusiko duzu <strong>Friki Map</strong> proiektuak biltzen dituen dendak eta 
                                establezimendu komertzialak. Denda bakoitzak friki kulturaren alor desberdin bat 
                                jorratzen du.</p>
                            <p>Kategoriak eta bere ezaugarriak:</p>
                            <ul>
                                <li><span class="badge me-2" style="background-color: #00ffff; color: #000;">ðŸ”µ</span>
                                    Denda - Friki produktu anitzak, jokoak, komikiak, eta abar</li>
                                <li><span class="badge me-2" style="background-color: #ff00ff; color: #fff;">ðŸŸ£</span>
                                    Jatetxea - Friki giroko jatetxeak eta kafeak</li>
                            </ul>
                            <p>Erabili eskumako panelaren botoiak dendak iragazteko edo kokaleku zehatzak ikusteko.</p>
                        </div>
                        <div class="col-md-4">
                            <div class="content-card h-100">
                                <h5><i class="fas fa-chart-line me-2"></i>Estatistikak</h5>
                                <p><i class="fas fa-store text-primary me-2"></i><strong id="totalStores">0</strong> kokaleku aktibo</p>
                                <p><i class="fas fa-tags text-secondary me-2"></i><strong id="totalCategories">0</strong> kategoria nagusi</p>
                                <p><i class="fas fa-city text-accent me-2"></i><strong id="totalCities">0</strong> hiri desberdin</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Map and Buttons Section (Below, side by side) -->
                <div class="row mt-4">
                    <!-- Map Container (Bigger - 8 columns) -->
                    <div class="col-lg-8 mb-4">
                        <div class="content-card h-100">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h4 class="mb-0"><i class="fas fa-map-marked-alt me-2"></i>Friki Map - Euskal Herria</h4>
                                <button class="btn btn-custom" id="refreshData">
                                    <i class="fas fa-sync-alt me-1"></i> Eguneratu datuak
                                </button>
                            </div>

                            <!-- Leaflet Map Container -->
                            <div class="map-container"
                                style="border-radius: 8px; overflow: hidden; border: 2px solid var(--border-color);">
                                <!-- Leaflet Map will be loaded here -->
                                <div id="leafletMap" style="height: 500px; width: 100%;"></div>
                            </div>

                            <!-- Map legend -->
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <div class="d-flex flex-wrap gap-2">
                                        <span class="badge" style="background-color: #00ffff; color: #000;"><i
                                                class="fas fa-store me-1"></i> Denda</span>
                                        <span class="badge" style="background-color: #ff00ff; color: #fff;"><i
                                                class="fas fa-utensils me-1"></i> Jatetxea</span>
                                    </div>
                                </div>
                                <div class="col-md-6 text-end">
                                    <small class="text-muted"><i class="fas fa-sync-alt me-1"></i> Azken eguneraketa: 
                                        <span id="lastUpdate">Kargatzen...</span></small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Buttons Panel (Smaller - 4 columns) -->
                    <div class="col-lg-4 mb-4">
                        <div class="content-card h-100">
                            <h4 class="mb-4"><i class="fas fa-store me-2"></i>Kontrolak</h4>

                            <!-- Category Filter Buttons -->
                            <div class="mb-4">
                                <h5><i class="fas fa-filter me-2"></i>Kategoriak</h5>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-custom btn-block text-start active" data-category="all" id="filterAll">
                                        <i class="fas fa-layer-group me-2"></i> Dena ikusi
                                        <span class="badge float-end" id="countAll">0</span>
                                    </button>
                                    <button class="btn btn-outline-custom btn-block text-start" data-category="denda" id="filterDenda">
                                        <i class="fas fa-store me-2"></i> Denda
                                        <span class="badge float-end" id="countDenda">0</span>
                                    </button>
                                    <button class="btn btn-outline-custom btn-block text-start" data-category="jatetxea" id="filterJatetxea">
                                        <i class="fas fa-utensils me-2"></i> Jatetxea
                                        <span class="badge float-end" id="countJatetxea">0</span>
                                    </button>
                                </div>
                            </div>

                            <!-- City Filter -->
                            <div class="mb-4">
                                <h5><i class="fas fa-city me-2"></i>Hiriak</h5>
                                <div class="row g-2" id="cityButtons">
                                    <div class="col-6">
                                        <button class="btn btn-outline-custom btn-block" data-city="Bilbo">
                                            <i class="fas fa-map-marker-alt me-1"></i> Bilbo
                                        </button>
                                    </div>
                                    <div class="col-6">
                                        <button class="btn btn-outline-custom btn-block" data-city="Gasteiz">
                                            <i class="fas fa-map-marker-alt me-1"></i> Gasteiz
                                        </button>
                                    </div>
                                    <div class="col-6">
                                        <button class="btn btn-outline-custom btn-block" data-city="Donostia">
                                            <i class="fas fa-map-marker-alt me-1"></i> Donostia
                                        </button>
                                    </div>
                                    <div class="col-6">
                                        <button class="btn btn-outline-custom btn-block" data-city="IruÃ±ea">
                                            <i class="fas fa-map-marker-alt me-1"></i> IruÃ±ea
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Stats -->
                            <div class="mt-4 pt-3 border-top">
                                <h6><i class="fas fa-chart-pie me-2"></i>Estatistikak</h6>
                                <div class="row text-center">
                                    <div class="col-4">
                                        <div class="display-6" id="statsTotal">0</div>
                                        <small>Kokalekuak</small>
                                    </div>
                                    <div class="col-4">
                                        <div class="display-6" id="statsCities">0</div>
                                        <small>Hiriak</small>
                                    </div>
                                    <div class="col-4">
                                        <div class="display-6" id="statsCategories">0</div>
                                        <small>Kategoriak</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Suggestion Modal (Hidden by default) -->
                <div class="modal fade" id="suggestionModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title"><i class="fas fa-plus-circle me-2"></i>Iradoki leku berria</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <p>Zehaztu mapa gehitzea gustatuko litzaizukeen leku berria:</p>
                                <div class="mb-3">
                                    <label class="form-label">Lekuaren izena</label>
                                    <input type="text" class="form-control" placeholder="Adib: Bilboko Denda">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Helbidea</label>
                                    <input type="text" class="form-control" placeholder="Adib: Bilbo, Kale Nagusia 123">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Herria</label>
                                    <input type="text" class="form-control" placeholder="Adib: Bilbo">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Kategoria</label>
                                    <select class="form-select">
                                        <option value="denda">Denda</option>
                                        <option value="jatetxea">Jatetxea</option>
                                    </select>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Utzi</button>
                                <button type="button" class="btn btn-custom">Bidali iradokizuna</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>&copy; 2023 Friki Map. Eskubide guztiak erreserbatuak. | Euskal Herriko Friki Mapa</p>
            <p class="mb-0">Gai aktiboa: <span id="currentTheme">Light</span> | API: <span id="apiStatus">Konektatzen...</span></p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/Geolokalizazioa/js/estiloak.js"></script>
    <script src="/Geolokalizazioa/js/mapa-datuak.js"></script>
</body>

</html>